<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>petri网 — 袁崇义 教程学习笔记 | 悟大师不误大事</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="petri网 — 袁崇义 教程学习笔记1、概论1.1 网模型论Special Net Theory（SNT），包括 有向网+网系统。  有向网（棋盘）：研究结构特征，结构性质 网系统（棋局）：动态性质，分析方法，层次结构  1.2 通用网论General Net Theory（GNT），借助SNT描述自然现象，具有普适性  Synchrony（同步论，同步距离） Concurrency（并发公理，">
<meta property="og:type" content="article">
<meta property="og:title" content="petri网 — 袁崇义 教程学习笔记">
<meta property="og:url" content="https://wfuing.github.io/2022/11/19/petri%E7%BD%91/index.html">
<meta property="og:site_name" content="悟大师不误大事">
<meta property="og:description" content="petri网 — 袁崇义 教程学习笔记1、概论1.1 网模型论Special Net Theory（SNT），包括 有向网+网系统。  有向网（棋盘）：研究结构特征，结构性质 网系统（棋局）：动态性质，分析方法，层次结构  1.2 通用网论General Net Theory（GNT），借助SNT描述自然现象，具有普适性  Synchrony（同步论，同步距离） Concurrency（并发公理，">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803090918931-16594889642134.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803091103704-16594890646715.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803090619865-16594887815471.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803090652652-16594888146452.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803090717833-16594888387663.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803091421949-16594892629346.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803091731503-16594894524647.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803091914870-16594895563958.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803091941825-16594895826099.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803092010011-165948961097210.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803092111342-165948967219011.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803092137112-165948969799412.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803092151028-165948971520413.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803101736112-165949305715815.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803101754499-165949307541216.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803101839014-165949312080117.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803100143212-165949210498214.png">
<meta property="og:image" content="https://wfuing.github.io/.io//image-20220803104951178-165949499201818.png">
<meta property="article:published_time" content="2022-11-19T05:22:46.000Z">
<meta property="article:modified_time" content="2022-11-19T05:22:36.363Z">
<meta property="article:author" content="九月九">
<meta property="article:tag" content="petri">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wfuing.github.io/.io//image-20220803090918931-16594889642134.png">
  
    <link rel="alternate" href="/atom.xml" title="悟大师不误大事" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">悟大师不误大事</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">远赴黄河，撞破南墙</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://wfuing.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-petri网" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/19/petri%E7%BD%91/" class="article-date">
  <time class="dt-published" datetime="2022-11-19T05:22:46.000Z" itemprop="datePublished">2022-11-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hexo/">hexo</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      petri网 — 袁崇义 教程学习笔记
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="petri网-—-袁崇义-教程学习笔记"><a href="#petri网-—-袁崇义-教程学习笔记" class="headerlink" title="petri网 — 袁崇义 教程学习笔记"></a>petri网 — 袁崇义 教程学习笔记</h1><h2 id="1、概论"><a href="#1、概论" class="headerlink" title="1、概论"></a>1、概论</h2><h3 id="1-1-网模型论"><a href="#1-1-网模型论" class="headerlink" title="1.1 网模型论"></a>1.1 网模型论</h3><p>Special Net Theory（SNT），包括 有向网+网系统。</p>
<ul>
<li>有向网（棋盘）：研究结构特征，结构性质</li>
<li>网系统（棋局）：动态性质，分析方法，层次结构</li>
</ul>
<h3 id="1-2-通用网论"><a href="#1-2-通用网论" class="headerlink" title="1.2 通用网论"></a>1.2 通用网论</h3><p>General Net Theory（GNT），借助SNT描述自然现象，具有普适性</p>
<ul>
<li>Synchrony（同步论，同步距离）</li>
<li>Concurrency（并发公理，无传递性）</li>
<li>Enlogy（网逻辑，无发生权事件）</li>
<li>Net Topology（网拓扑，无向图，离散和连续）</li>
<li>Information Flow Net（信息流网，可逆信息元件）</li>
</ul>
<h2 id="2、有向网"><a href="#2、有向网" class="headerlink" title="2、有向网"></a>2、有向网</h2><p>三元组 $N&#x3D;(S,T;F)$ 称为有向网，如果</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>$S \bigcup T \neq \emptyset$</td>
<td>非空</td>
</tr>
<tr>
<td>$\wedge S \bigcap T \neq \emptyset$</td>
<td>两类元素</td>
</tr>
<tr>
<td>$\wedge F \subseteq S \times T \bigcup T \times S$</td>
<td>两种关系</td>
</tr>
<tr>
<td>$\wedge dom(F) \bigcup cod(F) &#x3D; S \bigcup T$</td>
<td>无孤立元素</td>
</tr>
</tbody></table>
<p>其中：</p>
<ul>
<li>$dom(F) &#x3D; {x| \exists y:(x,y)\in F }$</li>
<li>$cod(F) &#x3D; {y| \exists x:(x,y)\in F }$</li>
</ul>
<p><strong>例1</strong>：</p>
<ul>
<li>$S&#x3D;{c,x,q,d}$</li>
<li>$T&#x3D;{cx,xq,qd,dc}$</li>
<li>$F&#x3D;{(c,cx),(cx,x),(x,xq),(xq,q),(q,qd),(qd,d),(d,dc),(dc,c)}$</li>
<li>$N_1&#x3D;{S,T;F}$</li>
<li><img src="/.io//image-20220803090918931-16594889642134.png" alt="image-20220803090918931"></li>
</ul>
<p><strong>例2</strong>：</p>
<p><img src="/.io//image-20220803091103704-16594890646715.png" alt="image-20220803091103704"></p>
<h3 id="2-1-基本元素"><a href="#2-1-基本元素" class="headerlink" title="2.1 基本元素"></a>2.1 基本元素</h3><ul>
<li>$S$ 元素：<img src="/.io//image-20220803090619865-16594887815471.png" alt="image-20220803090619865"> place 库所</li>
<li>$T$ 元素：<img src="/.io//image-20220803090652652-16594888146452.png" alt="image-20220803090652652"> transition 变迁（不是迁移，不只是搬家，这个既有质变，又有量变)</li>
<li>F：<img src="/.io//image-20220803090717833-16594888387663.png" alt="image-20220803090717833"> flow relation 流关系</li>
</ul>
<h3 id="2-2-表达方式比较"><a href="#2-2-表达方式比较" class="headerlink" title="2.2 表达方式比较"></a>2.2 表达方式比较</h3><ul>
<li>半形式化定义：易读，适合书面交流</li>
<li>形式化定义：适合引入数学方法，便于自动处理</li>
<li>图形表示：直观 便于交流，突显网状结构，面对面交流时无须为元素命名</li>
</ul>
<p><strong>例3</strong>：</p>
<p><img src="/.io//image-20220803091421949-16594892629346.png" alt="image-20220803091421949"></p>
<ul>
<li>上图是 $N&#x3D;({S_1,S_2},{t};{(S_1,t),(t,S_2)})$ 的图形表示吗？</li>
<li>在同构的意义上，是（同构：同类元素之间的一一对应，包括 $F$ ）</li>
</ul>
<p><strong>例4</strong>：</p>
<p><img src="/.io//image-20220803091731503-16594894524647.png" alt="image-20220803091731503"></p>
<ul>
<li>这是一个有向网吗？</li>
<li>可以看成一个，也可以看成两个。定义没有明确规定是否联通。</li>
<li>但是，既然两部分没有联系，为什么要放在一起研究？这就要从实际应用触发。</li>
</ul>
<h3 id="2-3-连通性"><a href="#2-3-连通性" class="headerlink" title="2.3 连通性"></a>2.3 连通性</h3><ul>
<li><img src="/.io//image-20220803091914870-16594895563958.png" alt="image-20220803091914870"> 弱连通</li>
<li><img src="/.io//image-20220803091941825-16594895826099.png" alt="image-20220803091941825"> 强连通，去掉一条边还连通</li>
<li><img src="/.io//image-20220803092010011-165948961097210.png" alt="image-20220803092010011"> 不连通，最后两个无连接</li>
</ul>
<h3 id="2-4-单纯网、简单网"><a href="#2-4-单纯网、简单网" class="headerlink" title="2.4 单纯网、简单网"></a>2.4 单纯网、简单网</h3><p>有向网允许以下结构吗？</p>
<ul>
<li><img src="/.io//image-20220803092111342-165948967219011.png" alt="image-20220803092111342">  不单纯（单纯性)</li>
<li><img src="/.io//image-20220803092137112-165948969799412.png" alt="image-20220803092137112"> 不简单（简单性)</li>
<li><img src="/.io//image-20220803092151028-165948971520413.png" alt="image-20220803092151028"> 重复弧，不能出现</li>
</ul>
<h4 id="2-4-1-术语：前集、后集"><a href="#2-4-1-术语：前集、后集" class="headerlink" title="2.4.1 术语：前集、后集"></a>2.4.1 术语：前集、后集</h4><p>$X &#x3D; S \bigcup T$ 有向网的节点集合元素集<br>$$<br>x,y \in X \<br>f(x)&#x3D;\left{<br>\begin{aligned}<br>^.x &amp; &#x3D; &amp; {y|(y,x)\in F} &amp; , &amp;x的前集 \<br>x^. &amp; &#x3D; &amp; {y|(x,y)\in F} &amp; , &amp;x的后集<br>\end{aligned}<br>\right.<br>$$</p>
<h4 id="2-4-2-单纯网、简单网、连通网"><a href="#2-4-2-单纯网、简单网、连通网" class="headerlink" title="2.4.2 单纯网、简单网、连通网"></a>2.4.2 单纯网、简单网、连通网</h4><h5 id="2-4-2-1-单纯网定义"><a href="#2-4-2-1-单纯网定义" class="headerlink" title="2.4.2.1 单纯网定义"></a>2.4.2.1 单纯网定义</h5><p>$$<br>\forall x \in X:\<br>^.x \cap x^. \neq \empty<br>$$</p>
<h5 id="2-4-2-2-简单网定义"><a href="#2-4-2-2-简单网定义" class="headerlink" title="2.4.2.2 简单网定义"></a>2.4.2.2 简单网定义</h5><p>$$<br>\forall x,y \in X:\<br>^.x&#x3D;^.y\bigwedge x^.&#x3D;y^.\bigwedge x\neq y<br>$$</p>
<h5 id="2-4-2-3-连通图定义"><a href="#2-4-2-3-连通图定义" class="headerlink" title="2.4.2.3 连通图定义"></a>2.4.2.3 连通图定义</h5><p>$$<br>\forall x,y \in X:\<br>(x,y)\in (F\cup F^{-1})^+\<br>其中 F^{-1}&#x3D;{(a,b)|(b,a)\in F}<br>$$</p>
<h5 id="2-4-2-4-重复弧问题"><a href="#2-4-2-4-重复弧问题" class="headerlink" title="2.4.2.4 重复弧问题"></a>2.4.2.4 重复弧问题</h5><p>不允许重复弧</p>
<h5 id="2-4-2-5-对偶网和互逆网"><a href="#2-4-2-5-对偶网和互逆网" class="headerlink" title="2.4.2.5 对偶网和互逆网"></a>2.4.2.5 对偶网和互逆网</h5><p>$$<br>N&#x3D;(S,T;F), N’&#x3D;(S’,T’;F’) 为有向网\<br>N和N’为对偶网,如果 S’&#x3D;T\bigwedge T’&#x3D;S\bigwedge F’&#x3D;F\<br>N和N’为互逆网,如果 S’&#x3D;S\bigwedge T’&#x3D;T\bigwedge F’&#x3D;F^{-1}\<br>$$</p>
<p><img src="/.io//image-20220803101736112-165949305715815.png" alt="image-20220803101736112"></p>
<p><img src="/.io//image-20220803101754499-165949307541216.png" alt="image-20220803101754499"></p>
<p>以下两个网是同一个网，同为 $N&#x3D;({S_1,S_2},{t};{(S_1,t),{t,S_2}})$ 的图示</p>
<p><img src="/.io//image-20220803101839014-165949312080117.png" alt="image-20220803101839014"></p>
<h4 id="2-4-3-有限网-amp-无限网"><a href="#2-4-3-有限网-amp-无限网" class="headerlink" title="2.4.3 有限网 &amp; 无限网"></a>2.4.3 有限网 &amp; 无限网</h4><p>有向网可有有限多个元素，也可以有不可数的有限多个元素 $|S\cup T|&lt;\infty$</p>
<ul>
<li>有限网<ul>
<li>人造系统：能力有限</li>
<li>自然规律（如四季变化）：局部观察</li>
</ul>
</li>
<li>无限网<ul>
<li>记录无始无终的自然变化</li>
<li>理论研究（图灵机）</li>
</ul>
</li>
</ul>
<h3 id="2-5-出现网"><a href="#2-5-出现网" class="headerlink" title="2.5 出现网"></a>2.5 出现网</h3><p>把出现的现象记录下来</p>
<p><strong>例5</strong>：</p>
<p><img src="/.io//image-20220803100143212-165949210498214.png" alt="image-20220803100143212"></p>
<h3 id="2-6-基础概念定义金律"><a href="#2-6-基础概念定义金律" class="headerlink" title="2.6 基础概念定义金律"></a>2.6 基础概念定义金律</h3><p>没有必要包含的,就有必要不包含</p>
<h4 id="2-6-1-有向网定义不包含"><a href="#2-6-1-有向网定义不包含" class="headerlink" title="2.6.1 有向网定义不包含"></a>2.6.1 有向网定义不包含</h4><ul>
<li>连通性</li>
<li>单纯性</li>
<li>简洁性</li>
<li>有限性</li>
</ul>
<h4 id="2-6-2-有向网概念特点"><a href="#2-6-2-有向网概念特点" class="headerlink" title="2.6.2 有向网概念特点"></a>2.6.2 有向网概念特点</h4><ul>
<li>基础概念简洁</li>
<li>可灵活引入后续概念</li>
</ul>
<h2 id="3、Petri-网"><a href="#3、Petri-网" class="headerlink" title="3、Petri 网"></a>3、Petri 网</h2><h3 id="3-1-Petri网定义"><a href="#3-1-Petri网定义" class="headerlink" title="3.1 Petri网定义"></a>3.1 Petri网定义</h3><h4 id="3-1-1-为什么叫Petri网"><a href="#3-1-1-为什么叫Petri网" class="headerlink" title="3.1.1 为什么叫Petri网"></a>3.1.1 为什么叫Petri网</h4><p><img src="/.io//image-20220803104951178-165949499201818.png" alt="image-20220803104951178"></p>
<figure class="highlight plaintext"><figcaption><span>Adam Petri``` ( 1926—2010 )， 莱比锡。```《Communication With Automata》```1962（Phd论文: Petri网起源于此，1970's 年代美国人学术会议首次称之为 Petri Net）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```Prof.Petri``` 称之为 ```Net Theory```</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>There is no need for Net Theory to exist if there is no real application of it.<br>There could be no real applications of Net Theory if there is no General Net Theory</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 3.1.2 Petri 网定义</span><br><span class="line"></span><br><span class="line">1. 有向网</span><br><span class="line">2. 以有向网为基础的网系统</span><br><span class="line">3. 网系统（模型）+理论（GNT）</span><br><span class="line">4. 模型+理论+应用</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>In order to apply net theory with success, it is by no means necessary to study<br>physics, or to remember the physical interpretations of net theory.<br>Just rely on the fact that every net(draw on paper) can be connected to the physical real world by a short(≤4) chain of net morphisms.<br>The 4 net morphisms are:</p>
<ol>
<li>An injection: your net is, unlike the universe, not a system which is closed with respect of the flow of matter, energy and information.</li>
<li>A refinement: Your net does not describe all the detailed elementary physical interactions, but rather, very much coarser.</li>
<li>A breaking of the physical symmentry: your net has a definite direction for the<br>execution of processes while the physical universe is time reversal invariant.</li>
<li>An abstraction: your net is an abstract from what belongs together in your purposeful activities. You need a concept that ties things to a pragmatic unit for your mind.</li>
</ol>
<pre><code>
反向理解 Petri 教授的话（Petri网应用）

- 一个pragmatic unit
- 一个execution direction: from past to future
- 一个coarsening process (concealing details)
- 一个abstracting process (formalizing)

### 3.2 Petri 系统层次模型

1. 第一层
   1. EN系统：Elementary net system，对象个体模型（人、物、信息、数据）和行动轨迹
   2. C/E系统：Condition/event system，大自然
2. 第二层
   1. P/T系统：Place/transition system
3. 第三层：高级网系统
   1. Pr/T系统：Predicate/transition system
   2. Colored net system
4. 第四层：
   1. cyber net system
   2. C_net system

### 3.3 EN系统 Elementary net system

基本网系统，定义：

$\sum=(B,E;F,c_&#123;in&#125;)$ 称为EN系统，如果 $(B,E;F)$ 为有向网，且 $c_&#123;in&#125;\subseteq 2^B$ 

- $2^B$ ：$B$ 的幂集合，即 $B$ 的所有子集的集合
- $B$ 中库所只有两种状态：有托肯（棋子）或无托肯。称为条件（Bedingung德语）
- $E$ 中变迁称为事件（Event ）只与条件有关
- $C_&#123;in&#125;$ 由成真的条件（有托肯的库所）组成，称为E的初始情态（case）

#### 3.3.1 丛

$B$ 的子集 $c$，即 $c\subseteq B$，称为 $\sum$ 的丛（constellation）

#### 3.3.2 变迁规则

1. $e\in E$，在丛 $c$ 有发生权，记为：$c[e&gt;$，如果 $^.e\subseteq c \wedge e^. \cap c=\empty$
2. $c[e&gt;$，$c^.=(c-^.e)\cup e^.$  称为 $c$ 的后继丛，记为 $c[e&gt;c&#39;$

##### 3.3.2.1  解释和不解释

**例1**

- $\sum_1$ 的动态变化：周而复始的教堂婚礼，三个token代表神父（$b_0$）和两位新人（$b_0, b_1$）（$T$ 不变量）
- $b_0, b_1, b_2... b_9$ ：三位参与者的状态
- $b_0,b_3, b_4,b_9$ ：神父（S不变量1）
- $b_1,b_3,b_5,b_7$ ：一位新人（S不变量2）
- $b_2,b_4,b_6,b_8$ ：另一位新人（S不变量3）

结构性质：不变量

基本现象：冲突，顺序，并发，同步，异步

##### 3.3.3.2 同步与异步

- 同步（局部）：两组（个）事件反复发生呈现的规律
- 同步（全局）：任何两组事件都（加权）同步
- 异步（全局）： 没有全局控制，局部确定
- Petri 网是异步并发系统（局部确定，所以并发）

**例2-法官和犯人** 

法官向犯人宣布

- 下周选一日执行死刑，执行前一天会向犯人宣布
- 允许犯人预猜行刑日，只能猜一次，猜中即可获释

犯人推理：

- 周日为最后一天，不会周日执行，因为周六即可猜中，于是周六不会被选......
- 结论：不会被处死
- 结果：执行了
- ？错在哪里

用petri 网描述，体会要素和抽象

- $i=1,2,3,4,5,6,7$
- $at_i$：等待的犯人，周 $i$ 前一日
- $d_i$ ：定于周 $i$ 执行，$d’_i$：周 $i$ 不执行
- $g_i$：犯人猜周 $i$ 执行，$g’_i$ ：未猜周 $i$ 执行
- $d_i, d’_i$：共有 7 个token ，恰有一个 $d_i$ 有（执行日）
- $g’_i$ ：共有 7 个token ，犯人可将其中一个移入 $g_i$ （猜一次）
- $e_i$：周 $i$ 执行
- $r_i$：周 $i$ 释放

![image-20220804130956762](petri%E7%BD%91/image-20220804130956762-16595897979171.png)

#### 3.3.3约束弧

引入约束弧，简化 $\sum_2$ 为  $\sum&#39;_2$。

![image-20220804132238591](petri%E7%BD%91/image-20220804132238591-16595905598282.png)

![image-20220804132136566](petri%E7%BD%91/image-20220804132136566.png)

#### 3.3.4 条件、事件的物理意义

##### 3.3.4.1 条件的物理意义

- 物理对象（人和物）个体的一种状态，如神父、犯人
- 若干对象作为一个整体的状态(如对话中的神父与新娘)
- 一位（one bit）信息的值（真或假），如 $\sum_2$ 中的 $d_i$，$g_i$
- 作为状态的信息必须可观察（有确定的值）
- 注意：信息系统中的一位信息和条件不同

##### 3.3.4.2 事件的物理意义

- 可观察的变化：有确定的观察结果。不因观察者或观察手段而改变（不关心变化原理）
- 原子变化：变化或发生或不发生。不会中断，无中间状态

特例：

- a，$b_1$ 和 $b_2$，$b_3$ 和 $b_4$ 结构上一样，非简单网
  - ![image-20220804134913590](petri%E7%BD%91/image-20220804134913590-16595921543923.png)
- b，$e$ 不可能发生，冲撞
  - ![image-20220804135020456](petri%E7%BD%91/image-20220804135020456-16595922212694.png)
- c，$e_3$ 不能发生，非单纯
  - $b_7$ 中的 token：工具或化学催化剂
  - 自用工具不必出现在模型中
  - 催化剂必须出现，但模型不能是EN系统，应该是有未知的中间状态
  - “好”的EN系统应该是单纯的
  - 非单纯结构是不适合用EN系统描述的物理对象
  - ![image-20220804135407182](petri%E7%BD%91/image-20220804135407182-16595924480525.png)

**例4-四季变化**

$\sum_3$ 是四季变化合格的EN系统吗？

![image-20220804141231644](petri%E7%BD%91/image-20220804141231644-16595935527777.png)

- 条件（状态）可观察吗？
- 事件（季节改变）可观察吗？

合格的四季系统什么样？

![image-20220804141219472](petri%E7%BD%91/image-20220804141219472-16595935404786.png)

- 本季为主，上一季的影子，下一季的味道
- 满足并发（出现）公理的最小系统
- 有向网上的完备化操作+同步距离计算

#### 3.3.5 可达情态集

##### 3.3.5.1 定义

###### 3.3.5.1.1 自然语言定义

从 $C_&#123;in&#125;$ （初始情态）开始，经有限多个事件发生所产生的所有后继丛构成的集合称为EN系统 $\sum = (B, E, F, C_&#123;in&#125;)$ 的可达集，用 $C_&#123;\sum&#125;$ 表示。 $C_&#123;\sum&#125;$ 中的丛称为 $\sum$ 的情态。

- 那么初始状态算可达情态集吗？即 $C_&#123;in&#125;\in C_&#123;\sum&#125;$ ？

###### 3.3.5.1.2 半形式化定义

$2^B$ 的子集 $R$ 称为 EN系统 $\sum =(B,E,F,C_&#123;in&#125;)$ 的可达情态集，
$$
C_&#123;in&#125;\in R \wedge C \in R \wedge \exists e\in E:C[e&gt;C&#39; \\

\rightarrow C&#39;\in R
$$
，**此外 $R$ 中没有别的丛**。$R$ 中的丛称为情态（case）。通常用 $C_&#123;\sum&#125;$ 表示可达情态集。 

###### 3.3.5.1.3 构造法

1. 令集合 $R=\&#123;(c_&#123;in&#125;, 0)\&#125;$ ，

2. 从 $R$ 中任取 $(c,0)$，


$$
\forall e\in E:(c[e&gt;c&#39; \wedge \&#123;(c&#39;,0),(c&#39;,1\&#125;) \cap R=\empty \\

\rightarrow R:=R\cup\&#123;c&#39;,0\&#125; \\

\rightarrow R:=R \cup \&#123;(c,1)-(c,0)\&#125;
$$

直到 $R$ 中不再有以 0 标注的 $c$ 。

3. $C_&#123;\sum&#125;=\&#123;c|(c,1)\in R\&#125;$

###### 3.3.5.1.4 形式化定义

$C_&#123;\sum&#125;$ 为可达情态集，如果 $RC(C_&#123;\sum&#125;)$
$$
FR(R):\Longleftrightarrow R \subseteq 2^B \wedge c_&#123;in&#125; \wedge \forall c \in R:(\exists e \in E \wedge c[e&gt;c&#39;  \\
\rightarrow c&#39; \in R \\

RC(C):\Longleftrightarrow FR(C) \wedge \forall C&#39;:FR(C&#39;)\\
\rightarrow C \subseteq C&#39; \\
$$
对于形式化定义一定要考虑 **定义的唯一性**：
$$
RC(C) \wedge RC(D) \\
\rightarrow C = D
$$
证明：需要定义  $C\subseteq D \wedge D \subseteq C$

定理（算法终止）：构造方法一定会终止，基本网系统中定义 因为 $B$ 为有限集，$2^B$ 也为有限集。

##### 3.3.5.2 基本现象

$c\in C_&#123;\sum&#125;$ ，$e_1,e_2 \in E$，$b\in B$

$e_1,e_2$ 在 $c$ 有顺序关系，如果 $c[e_1&gt;c&#39; \wedge c&#39;[e_2&gt; \wedge \neg c[e_2&gt;$

$e_1,e_2$ 在 $c$ 有并发，如果 $c[e_1 &gt; \wedge c[e_2&gt; \wedge (^.e_1 \cup e_1^.) \cap (^.e_2 \cup e_2^.)=\empty$

 $e_1,e_2$ 在 $c$ 冲突（conflict），如果 $c[e_1 &gt; \wedge c[e_2&gt; \wedge (^.e_1 \cup e_1^.) \cap (^.e_2 \cup e_2^.) \neq \empty$

 情态 $c$ 之下在条件 $b$ 有冲撞（contact），如果 $\exists e \in E: ^.e \subseteq c \wedge b \in e^. \cap c $

###### 3.3.5.2.1 例5（参看教堂婚礼系统）

$e_1$ 和 $e_2$ 有顺序关系，$e_1$ 和 $e_3$ 有并发关系

![image-20221024162601153](petri%E7%BD%91/image-20221024162601153-16665999621181.png)

一型冲突，竞争的是资源

![image-20221024162747750](petri%E7%BD%91/image-20221024162747750-16666000685263.png)

二型冲突，竞争的是空间资源

![image-20221024162808988](petri%E7%BD%91/image-20221024162808988-16666000897434.png)

冲撞

![image-20221024162859235](petri%E7%BD%91/image-20221024162859235-16666001402785.png)

#### 3.3.6 结构互补条件

$b_1$ 和 $b_2$ 称为结构互补条件，如果一方前集后集为另一方后集前集，即 $^.b_1 = b_2^. \wedge b_1^.=^.b_2$ ，例如：

![image-20221024173039456](petri%E7%BD%91/image-20221024173039456-16666038404136.png)

补操作可以将二型冲突改为一型冲突

![image-20221024173213729](petri%E7%BD%91/image-20221024173213729-16666039346807.png)

不操作可以消除冲撞

![image-20221024173236008](petri%E7%BD%91/image-20221024173236008-16666039566398.png)

##### 3.3.6.1 例7

根据定义，b 处有一冲撞：

![image-20221024173714940](petri%E7%BD%91/image-20221024173714940-16666042355999.png)

自己跟自己争空间？观察不到的“事件”。没有必要修改定义，排除此种冲撞。

##### 3.3.6.2 思考：四季系统有初始状态吗？

自然界变化无始无终，没有初态，只有当前状态，事件反向发生即可算出过去的状态。所有可能的过去、现在和未来状态构成“完全可达情态集”C。

##### 3.3.6.3 例子

初始状态：

![image-20221024174157796](petri%E7%BD%91/image-20221024174157796-166660451859710.png)

一次变迁：

![image-20221024174340935](petri%E7%BD%91/image-20221024174340935-166660462201211.png)

二次变迁，此时只有红色的可以发生新的变迁：

![image-20221024174403361](petri%E7%BD%91/image-20221024174403361-166660464440312.png)

三次变迁：

![QQ截图20221024174451](petri%E7%BD%91/QQ%E6%88%AA%E5%9B%BE20221024174451-166660477275713.png)

四次变迁：

![QQ截图20221024174451](petri%E7%BD%91/QQ%E6%88%AA%E5%9B%BE20221024174451-166660481618714-166660481732515.png)

五次变迁：

![image-20221024174726630](petri%E7%BD%91/image-20221024174726630-166660484770216.png)

六次变迁：

![image-20221024174756613](petri%E7%BD%91/image-20221024174756613-166660487755217.png)

七次变迁：

![QQ截图20221024174451](petri%E7%BD%91/QQ%E6%88%AA%E5%9B%BE20221024174451-166660498703318-166660498784219.png)

八次同第七次变迁，九次变迁：

![QQ截图20221024174451](petri%E7%BD%91/QQ%E6%88%AA%E5%9B%BE20221024174451-166660506496420-166660506579021.png)

红的 token 只能在四个地方出现，所以会有一个 **s 不变量**，即在这四个地方的 token 的量是一个固定值，只有一个。同样黄色的两个 token 也有自己的 **基本 s 不变量**。同样，把它们几个加起来可以组成 **组合型的 s 不变量**。

**替补变量**：每一个 方格（变迁）都有自己出现的次数，比如其他的都是一次，只有下面的出现了两次：

![image-20221024175742597](petri%E7%BD%91/image-20221024175742597-166660546372222.png)

这个例子可以用到教堂婚礼，红色的是神父，其他的两个是新人。

### 3.4 C/E 系统  Condition/Event system

C/E 系统与 EN 系统的区别是 **C/E 系统没有初始状态**。

$\sum=(B,E;F,C)$ 称为 C/E 系统，即条件/事件系统。其中：

- $B$，$E$ 分别为条件集和事件集
- $F$ 是流关系
- $(B,E;F)$ 为有向网
- C是完全可达集

C/E 系统是通用网论的基础模型。同步论最初是借助事件正反双向发生定义的。

 ### 3.5 P/T 系统（库所/变迁系统）

#### 3.5.1 库所/变迁系统定义

- 库所：Place
- 变迁：Transition

$\sum = (S,T;F,K,W,M_0)$ 为 P/T 系统，如果 $(S,T;F)$ 为有向网。

- $K:S \rightarrow \&#123;1,2,3,...\&#125;\cup\&#123;\infty\&#125;$ ，$S$ 元素的容量函数
- $\wedge W:F \rightarrow \&#123;1,2,3,...\&#125;$ ，$F$ 上的权函数，资源消耗或产生的量
- $\wedge M_0:S \rightarrow \&#123;0,1,2,...\&#125;$ ，初始标识（资源初始分布）
- $\wedge \forall s \in S: M_0(s) \leq K(s)$ 

思考：如何理解 $K(s)=\infty$

##### 3.5.1.1 标识：资源分布

定义：$M:S \rightarrow\&#123;0,1,2,...\&#125;$ 称为 $\sum$ 上的标识，如果 $\forall s \in S:M(s) \leq K(s)$

#### 3.5.2 变迁规则

![image-20221025101251840](petri%E7%BD%91/image-20221025101251840-16666639727971.png)

##### 3.5.2.1 变迁规则：发生权

$t \in T$，$M$ 为 $\sum$ 的标识

定义：$t$ 在 $M$ 有发生权，记作 $M[t&gt;$ ，如果 $\forall s\in ^.t:M(s) \geq W(s,t) \wedge \forall s \in t^.: M(s) + W(s,t) \leq K(s)$ 

##### 3.5.2.2 变迁规则：后继

若$M[t&gt;$ ，则 $t$ 可以发生，$M&#39;$ 为 $M$ 的后继标识：
$$
\begin&#123;align*&#125;
\begin&#123;split&#125;
M&#39;(s)= \left \&#123;
\begin&#123;array&#125;&#123;ll&#125;
    M(s)-W(s,t) &amp; if(s\in^.t-t^.)\\
    M(s)+W(t,s) &amp; if(s\in t^.-^.t)\\
    M(s)+W(t,s)-W(s,t) &amp; if(s\in ^.t \cap t^.)\\
    M(s) &amp; if(s\notin ^.t \cup t^.)
\end&#123;array&#125;
\right.
\end&#123;split&#125;
\end&#123;align*&#125;
$$
后继关系记作 $M[t&gt;M&#39;$

##### 3.5.2.3 变迁外延，局部确定原理

$^.t \cup t^.$ 称为变迁 $t$ 的外延（extension）

###### 3.5.2.3.1 局部确定原理（普适）

- 每个变迁都有它的外延
- 变迁的发生只依赖其外延，也只改变其外延
- $\sum \cap Env(\sum)$ 无冲突

##### 3.5.2.4 广义权函数

$W&#39;:S \times T \cup T \times S \rightarrow \&#123;0,1,2,...\&#125;$ 称为 $\sum$ 的广义权函数，如果 $\forall(x,y)\in S \times T \cup T \times S$
$$
\begin&#123;align*&#125;
\begin&#123;split&#125;
W&#39;(x,y)= \left \&#123;
\begin&#123;array&#125;&#123;ll&#125;
    W(x,y) &amp; if(x,y)\in F\\
    0 &amp; if(x,y)\notin F
\end&#123;array&#125;
\right.
\end&#123;split&#125;
\end&#123;align*&#125;
$$

###### 3.5.2.4.1 定义，用广义权函数给出变迁规则

$$
M[t&gt;: \Longleftrightarrow \forall s \in S: M(s) \geq W&#39;(s,t) \wedge M(s) + W&#39;(s,t) \leq K(s) \\
M[t&gt;M&#39;: \Longleftrightarrow M[t&gt; \wedge \forall s \in S: M&#39;(s) = M(s) - W&#39;(s,t) + W&#39;(t,s)
$$

这仅仅是技术上的处理，而不是概念上的更新

- 得：广义权函数使变迁规则看上去简洁
- 失：
  - 技术处理，用 $W&#39;$ 取代 $W$ 会失去其物理含义；
  - 用 $W&#39;$ 取代 $W$ 和 $F$ ，定义 $\sum=(S,T;W&#39;,M_0)$ ，会失去网结构

##### 3.5.2.5 缺省值及特例的图示

$t_1$ 缺省的容量为 $\infty$ ，缺省的权为 1。

![image-20221025110030330](petri%E7%BD%91/image-20221025110030330-16666668310642.png)

$t_2$ 不属于 P/T 系统，$M_0(s_3)=3&gt;K(s_3)=2$

![image-20221025110157618](petri%E7%BD%91/image-20221025110157618-16666669183003.png)

$t_3$ 属于 P/T 系统，只是不会发生

![image-20221025110248632](petri%E7%BD%91/image-20221025110248632-16666669692014.png)

- 对于图上的变迁上没有数字的是 **权函数的缺失值**，一般就是1。
- 对于图上的容量上没有数字的是 **容量函数的缺失值**，一般就是 $\infty$。

##### 3.5.2.6 容量的物理含义

先举个**教堂婚礼**的例子，如果忽略新郎新娘之间的差别，即从 CE 系统到 P/T 系统。

![QQ截图20221025110835](petri%E7%BD%91/QQ%E6%88%AA%E5%9B%BE20221025110835-16666675045656.png)

- 缺点：少了很多具体的描述，比如说 EN 系统原来的冲突消失了。
- 优点：系统变的简单了。

思考：$K  \equiv \infty$ 还是
$$
\begin&#123;align*&#125;
\begin&#123;split&#125;
\left \&#123;
\begin&#123;array&#125;&#123;ll&#125;
    K(s_1)=K(s_3)=K(s_4)=2\\
    K(s_0)=K(s_2)=K(s_5)=1
\end&#123;array&#125;
\right.
\end&#123;split&#125;
\end&#123;align*&#125;
$$
就这个例子而言，其实认为它的容量是 2 还是 $\infty$ 都可以，因为都不会影响系统的后继和运行。

##### 3.5.2.7 库所的物理含义

- 可观察的同类资源
  - 同类是指在系统中作用相同，如新浪新娘
- 例子（桶装水和瓶装水不同类）
  - 如果要描述的是出门旅游：它们属于不同变迁的外延。
  - 它们参与的变迁不同。
    - 对于桶装水，需要把水倒到瓶装水，然后饮用。
    - 对于瓶装水，直接可以饮用。

##### 3.5.2.8 变迁的物理含义

- 可观察的资源消耗和新资源的产生
  - 有确定不变的观察结果，不因观察者或观察方式而改变，包括质变和量变。
  - 原子性：不中断，无中间状态。中断属于意外。
- 网系统只描述正常变化，不描述意外。观察意外会得到不确定的结果，且不能枚举。

思考：库所元素和变迁元素是否一目了然？

并没有想象中的一目了然，需要分清楚边界和切口。

#### 3.5.3 EN 系统 $\subset$ P/T 系统

EN 系统 $\sum = (B,E;F,c_&#123;in&#125;)$ 是 P/T 系统的特例。

- 其中 $K\equiv 1$ ，$W \equiv 1$ ，$M_0$ 是 $c_&#123;in&#125;$ 的另一种表示

$$
\begin&#123;align*&#125;
\begin&#123;split&#125;
\forall b \in B : \left \&#123;
\begin&#123;array&#125;&#123;ll&#125;
    M_0(b)=1 &amp;if(b\in c_&#123;in&#125;)\\
    M_0(b)=0 &amp;if(b\notin c_&#123;in&#125;)
\end&#123;array&#125;
\right.
\end&#123;split&#125;
\end&#123;align*&#125;
$$

##### 3.5.3.1 练习

将 EN 系统上定义的基本现象移植到 P/T 系统上，变迁（事件）和变迁发生权。

###### 3.5.3.1.1 例子1

![image-20221025114442005](petri%E7%BD%91/image-20221025114442005-16666694830999.png)

- $t_1$ 、$t_2$ 并发
- $t_1$ 、$t_2$ 分别和自己并发

###### 3.5.3.1.2 例子2

![image-20221025114431933](petri%E7%BD%91/image-20221025114431933-16666694725538.png)

- $t_1$ 、$t_2$ 、$t_3$ 两两并发
- $t_2$ 和自己并发
- 三者不能并发

##### 3.5.3.2 并发步

在同一标识可以并发的一个或多个变迁，称为该标识上的一个并发步。例如：

- 在 `3.5.3.1.1 例子1` 中 $\&#123;t_1,t_2\&#125;$ 是并发步，写成 $t_1+t_2$ 。同时，$2t_1$、$2t_2$ 也是并发步。
- 在 `3.5.3.1.2 例子2` 中 $t_1+t_2$ ，$t_1+t_3$ ，$t_2+t_3$ ，$2t_2$ 。

##### 3.5.3.3 可达标识集

###### 3.5.3.3.1 定义

设 $M$ 为 $\sum$ 的任一标识，用 $[M \rangle$ 表示符合下列条件的**最小**集合

- $M \in [M \rangle$
- $t\in T \wedge M&#39; \in [M \rangle \wedge M&#39;[t \rangle M&#39;&#39; \\ \rightarrow M&#39;&#39; \in [M \rangle$

定义：$[M_0 \rangle$ 称为 $\sum$ 的可达标识集

###### 3.5.3.3.2 自然语言定义

可达标识集 $[M_0 \rangle$ 的自然语言定义：

- 从 $M_0$ 开始，包括 $M_0$ 
- 经有限步变迁发生
- 能到达的
- 所有标识的集合

思考：怎么证明？

##### 3.5.3.4 变迁序列

$\sigma = \tau _1 \tau _2 ... \tau _n$ 称为 $\sum$ 的变迁序列。如果对 $i=1,2,...,n$ ，$\tau _i \in T \wedge \exists M_i \in [M_0 \rangle : M_&#123;i-1&#125;[\tau _i \rangle M_i$，即 $M_0 [\tau _1 \rangle M_1[ \tau _2 \rangle M_2... M_&#123;n-1&#125;[\tau _n \rangle M_n$

$M_n$ 称为 $\sigma$ 的后继标识，记作 $M_0[\sigma \rangle M_n$

变迁序列是从 $M_0$ 开始可以依次发生的变迁组成的序列，不是任意的变迁组成的序列。

变迁序列可以扩展到无穷序列：

- $\sigma &#39; = \tau _1 \tau _2 \tau _3...$ 为无穷序列，如果它的任何有限前缀均为变迁序列，则 $\sigma &#39;$ 是（无穷）变迁序列。

##### 3.5.3.5 P/T 系统性质

###### 3.5.3.5.1 活性

关注状态，即 $[M_0 \rangle$ 

- 变迁 $t\in T$ 是活的，如果 $\forall M \in [M_0 \rangle \exists M&#39; \in [ M \rangle : M&#39;[t \rangle$ 。
- $\sum$ 是活的，如果它的所有变迁都是活的。

###### 3.5.3.5.2 有界性

若存在正整数 $k$ ，使得 $\forall M \in [M_0 &gt; \forall s \in S:M(s) \leq k$ ，则 $\sum$ 称为有界系统。

- 教堂婚礼系统是活的，以 2 为界。
- 哲学家系统的网系统是活的，以 1 为界。哲学家就餐问题的图如下：

![image-20221025132129786](petri%E7%BD%91/image-20221025132129786-166667529061710.png)

###### 3.5.3.5.3 公平性

如果不存在无穷变迁序列 $\sigma$ 和变迁子集 $T_1$ 、$T_2$ ，使得 $\#(\sigma ,T_1)=\infty \wedge \#(\sigma, T_2)&lt;\infty$，则 $\sum$ 是公平的， 其中 $\#(\sigma ,T_i)$ 是 $T_i$ 中变迁在 $\sigma$ 中出现的次数，$i=1,2$ 。

- 教堂婚礼系统是公平的
- 不加管理的哲学家系统是不公平的
- 问题：公平性的定义合理吗？

##### 3.5.3.6 系统进程

状态变迁并重：网系统进程。

###### 3.5.3.6.1 出现网

$N=(B,E;F)$ 称为出现网，如果 $N$ 为有向网，且 $(\forall b \in B:|^.b| \leq 1 \wedge |b^.| \leq 1) \wedge (\forall x \in B \cup E:(x,x) \notin F^+)$

例子（出现网 $N_1$）：

![image-20221025160430552](petri%E7%BD%91/image-20221025160430552-166668507161911.png)

- $N_1$ 每个库所至多一条入弧、一条出弧。（产生和消耗）
- $N_1$ 无环，$(b_2,b_4)\in F^2$，$(b_1,b_3)\in F^5$，$F^+=F\cup F^2 \cup F^3 \cup ...$

定义：出现网 $N$ 是网系统 $\sum$ 的一个进程，如果存在从 $N$ 到 $\sum$ 的映射。如下图就是 出现网 $N_1$ 的 网系统映射 网系统 $\sum _1$

![image-20221025161320259](petri%E7%BD%91/image-20221025161320259-166668560139014.png)

$N_1$ 是 $\sum _1$ 的一个进程（变迁发生的记录），从 $N_1$ 到 $\sum _1$ 的映射：

- $b_1 \rightarrow s_1$ ，$b_2 \rightarrow s_3$，$b_3 \rightarrow s_2$，$b_4 \rightarrow s_4$，$b_5 \rightarrow s_3$，$b_6 \rightarrow s_1$，$b_7 \rightarrow s_2$
- $e_1 \rightarrow t_1$，$e_2 \rightarrow t_2$，$e_3 \rightarrow t_1$

###### 3.5.3.6.2 网系统进程的形式（半形式）定义很复杂

通常只给出 $\sum=(S,T;F,M_0)$ 上的进程定义，即 $K\equiv \infty$ ，$W \equiv 1$。

这里最“老”的网系统（Petri 最早的定义，在其博士论文中的定义）。

进程是并发公理基础。

##### 3.5.3.7 $k&lt;\infty$ 的物理含义

$k(s)=5$ 表示 $s$ 有 5 个“空间资源”，或 $s$ 的空间至多能容纳 5 个$s$ 类资源（如车库）。例如下图：

![image-20221025162421838](petri%E7%BD%91/image-20221025162421838-166668626257815.png)

$t$ 只能发生一次，再发生会引出 $s$ 处的冲撞。

$k=\infty$：空间足够大，不会对变迁发生构成限制。

![QQ截图20221024174451](petri%E7%BD%91/QQ%E6%88%AA%E5%9B%BE20221024174451-166668651283616-166668651365817.png)

以下就会受到影响：

![image-20221025163019258](petri%E7%BD%91/image-20221025163019258-166668662027818.png)

###### 3.5.3.7.1 容量函数的作用

以容量函数而非 token 表示空间资源，体现空间资源与其它资源的本质区别：**被占的空间不能阻止强占，已消耗的资源已不可见**。

引出 “冲撞（contact）” 这一基本现象。熟知空间资源特点后，**S_补技术**改用 token 表示有限的空间资源，$k \equiv \infty$ ，冲撞从系统中消失（并非从现实消失）。

$s&#39;$ 和 $s$ 互为补库所：

- $s&#39;^.=^.s \wedge ^.s&#39;=s^.$
- $W(s&#39;,t)=W(t,s)$
- $M(s&#39;)+M(s)=k(s)$

例如下面的：

![QQ截图20221024174451](petri%E7%BD%91/QQ%E6%88%AA%E5%9B%BE20221024174451-166668779951619-166668780052420.png)

#### 3.5.4 代数表示

限于有线网系统 $:$ 全局，结构：$\sum =(S,T;F,W,M_0)$，$K \equiv \infty$，$T=\&#123;t_1,t_2,...,t_n\&#125;$，$S=\&#123;s_1,s_2,...,s_m\&#125;$，$W&#39;:S \times T \cup T \times S \\ \rightarrow \&#123;0,1,2,...\&#125;$ 为广义权函数。

##### 3.5.4.1 关联矩阵

定义：$m \times n$ 阶矩阵 $A$ 称为 $\sum$ 的关联矩阵。如果
$$
\begin&#123;align*&#125;
\begin&#123;split&#125;
A=
\begin&#123;array&#125;&#123;lc&#125;
    &#123;&#125;&amp;
    \begin&#123;array&#125;&#123;cc&#125;t_1&amp;t_2&amp;...&amp;t_n \end&#123;array&#125;\\
    \begin&#123;array&#125;&#123;c&#125;s_1\\s_2\\ \vdots \\s_m\end&#123;array&#125;&amp;
    \left(\begin&#123;array&#125;&#123;cc&#125;
    &amp;&amp;&amp;\\
    &amp;a(i,j)&amp;&amp;\\
    ...&amp;\vdots&amp;&amp;\\
    &amp;&amp;&amp;
    \end&#123;array&#125;\right)
\end&#123;array&#125;
\end&#123;split&#125;
\end&#123;align*&#125;
$$
其中，$a(i,j)=W&#39;(t_i,s_j)-W&#39;(s_j,t_i)$。

关联矩阵与 $M_0$ 无关，是网系统的结构描述。

###### 3.5.4.1.1 例子 $\sum _1$

![image-20221025173613738](petri%E7%BD%91/image-20221025173613738-166669057447321.png)

$\sum _1$ 的关联矩阵
$$
\begin&#123;align*&#125;
\begin&#123;split&#125;
A=
\begin&#123;array&#125;&#123;lc&#125;
    &#123;&#125;&amp;
    \begin&#123;array&#125;&#123;cc&#125;t_1&amp;t_2 \end&#123;array&#125;\\
    \begin&#123;array&#125;&#123;c&#125;h\\l\\c\\r\end&#123;array&#125;&amp;
    \left(\begin&#123;array&#125;&#123;cc&#125;
    -1&amp;-1\\
    -2&amp;-4\\
    1&amp;0\\
    0&amp;1
    \end&#123;array&#125;\right)
\end&#123;array&#125;
\end&#123;split&#125;
\end&#123;align*&#125;
$$
###### 3.5.4.1.2 例子 $\sum _2$

![image-20221025215945641](petri%E7%BD%91/image-20221025215945641-16667063866911.png)

$\sum _2$ 的关联矩阵
$$
\begin&#123;align*&#125;
\begin&#123;split&#125;
A_2=
\begin&#123;array&#125;&#123;lc&#125;
    &#123;&#125;&amp;
    \begin&#123;array&#125;&#123;cc&#125;t_1&amp;t_2&amp;t_3 \end&#123;array&#125;\\
    \begin&#123;array&#125;&#123;c&#125;s_1\\s_2\\s_3\end&#123;array&#125;&amp;
    \left(\begin&#123;array&#125;&#123;cc&#125;
    -1&amp;0&amp;1\\
    -1&amp;1&amp;-1\\
    2&amp;-1&amp;0
    \end&#123;array&#125;\right)
\end&#123;array&#125;
\end&#123;split&#125;
\end&#123;align*&#125;
$$

##### 3.5.4.2 `S_向量`和`T_向量`

- $\tau=(a_1,a_2,...,a_n)$，$a_i$ 为非负整数
- $\sigma = (b_1,b_2,...,b_m)$，$b_j$ 为非负整数
- 分别称为 $\sum$ 的 `T_向量` 和 `S_向量`
- $\tau ^ T =
  \begin&#123;array&#125;&#123;lc&#125;
      \left(\begin&#123;array&#125;&#123;cc&#125;
      a_1\\
      a_2\\
      \vdots \\
      a_n
      \end&#123;array&#125;\right)
  \end&#123;array&#125;$​，$\sigma ^ T =
  \begin&#123;array&#125;&#123;lc&#125;
      \left(\begin&#123;array&#125;&#123;cc&#125;
      b_1\\
      b_2\\
      \vdots \\
      b_m
      \end&#123;array&#125;\right)
  \end&#123;array&#125;$ 分别是 $\tau$ 和 $\sigma$ 的转置向量。

###### 3.5.4.2.1 状态方程

$M=M_0+A \cdot \tau ^ T$ 称为 $\sum$ 的状态方程，其中 $\tau$ 为任一 `T_向量`，$M_0$ 和 $M$ 分别是标识的 `S_向量`

命题：设 $\alpha = \tau _1,\tau _2,...$，$\tau _1$ 为 $\sum$ 的任一变迁序列，$\tau=(a_1,a_2,...,a_n)$ 是它的 `T_向量` ，即 $a_i$ 为变迁 $t_i$ 在该序列中出现的次数，$i=1,2,...,n$ ，则 $M=M_0+A \cdot \tau ^ T$，其中 $M$ 是 $\alpha$ 的后继：$M_0[\alpha \rangle M$。

###### 3.5.4.2.2 `T-不变量` 和 `S-不变量`

**`T-不变量`**

- 若 `T_向量` $\tau$ 满足 $M_0=M_0+A \cdot \tau^T$，则 $\tau$ 称为 $\sum$ 的 `T-不变量`。
- 若 $\tau$ 为 $\sum$ 的 `T-不变量`，则 $A \cdot \tau ^ T=\theta ^ T_S$，其中 $\theta _S$ 是分量全为 0 的 `S_向量` 。

**`S-不变量`**

若 `S_向量` $\sigma$ 满足 $\sigma \cdot A = \theta _T$ ，则 $\sigma$ 称为 $\sum$ 的 `S-不变量`。其中 $\theta _T$ 是分量全为 0 的 `T_向量` 。

**例子** $\sum _1$

![image-20221025191405500](petri%E7%BD%91/image-20221025191405500-166669644672623.png)

$\sum _1$ 的 `S-不变量` 包括：

- $\sigma _1=(1,0,1,1)$
- $\sigma _2=(0,1,2,4)$
- $\sigma _1 \cdot A_1 = (1,0,1,1)\cdot \begin&#123;array&#125;&#123;lc&#125;
      \left(\begin&#123;array&#125;&#123;cc&#125;
      -1 &amp; -1\\
      -2 &amp; -4\\
      1 &amp; 0\\
      0 &amp; 1
      \end&#123;array&#125;\right)
  \end&#123;array&#125; = (0,0)$ ​
- $\sigma _2 \cdot A_1 = (0,1,2,4)\cdot \begin&#123;array&#125;&#123;lc&#125;
      \left(\begin&#123;array&#125;&#123;cc&#125;
      -1 &amp; -1\\
      -2 &amp; -4\\
      1 &amp; 0\\
      0 &amp; 1
      \end&#123;array&#125;\right)
  \end&#123;array&#125; = (0,0)$ 

**例子** $\sum _2$ 

![image-20221025220635542](petri%E7%BD%91/image-20221025220635542-16667067967302.png)

$\sum _2$ 的不变量包括：

- $\sigma=(1,1,1)$
- $\tau = (1,2,1)$
- $\sigma \cdot A_2 = (1,1,1)\cdot \begin&#123;array&#125;&#123;lc&#125;
      \left(\begin&#123;array&#125;&#123;cc&#125;
      -1 &amp; 0 &amp; 1\\
      -1 &amp; 1 &amp; -1\\
      2 &amp; -1 &amp; 0
      \end&#123;array&#125;\right)
  \end&#123;array&#125; = (0,0,0)$ 
- $A_2 \cdot \tau ^ T = \begin&#123;array&#125;&#123;lc&#125;
      \left(\begin&#123;array&#125;&#123;cc&#125;
      -1 &amp; 0 &amp; 1\\
      -1 &amp; 1 &amp; -1\\
      2 &amp; -1 &amp; 0
      \end&#123;array&#125;\right) 
  \end&#123;array&#125; \cdot \begin&#123;array&#125;&#123;lc&#125;
      \left(\begin&#123;array&#125;&#123;cc&#125;
      1\\
      2\\
      1
      \end&#123;array&#125;\right) 
  \end&#123;array&#125; = (0,0,0)$​​ 

**练习**

$\sum_1$ 是鸡兔同笼问题中数鸡（$t_1$）数兔（$t_2$）的网表示，请补上 $t_1$  ，$t_2$ 可能需要的调整变迁（并发数数，一方太快，导致头或腿剩下）。

找一找教堂婚礼系统的不变量

找一找哲学家系统的不变量，理解 `S-不变量` 和 `T-不变量` 的物理意义。

###### 3.5.4.2.3 求解不变量

$\left \&#123;
\begin&#123;array&#125;&#123;ll&#125;
    A \cdot X^T = \theta _S \\
    Y \cdot A = \theta _T 
\end&#123;array&#125;
\right.$ 可以求解 $T$ 和 $S$ 不变量或者验证不变量。其中，$X=(x_1,x_2,...,x_n)$ 和 $Y=(y_1,y_2,...,y_m)$ 分别为未知变量 `T_向量` 和 `未知S_向量` 。

###### 3.5.4.2.4 结论

`T-不变量` 和 `S-不变量` 是结构性质，与 $M_0$ 无关。

定义：

- 如果 $\sum$ 有非零 `T-不变量` ，则 $\theta _T$ 也是 $\sum$ 的 `T-不变量` ；否则不是
- 如果 $\sum$ 有非零 `S-不变量` ，则 $\theta _S$ 也是 $\sum$ 的 `S-不变量` ；否则不是

命题：

- `T-不变量`（`S-不变量`）的线性组合也是 `T-不变量`（`S-不变量`）。

#### 3.5.5 通用分析方法

- 可达树与覆盖树算法
- 求解不变量法
- 化简法：忽略网结构细节
- 提高层次法：提高抽象度以减少节点数

##### 3.5.5.1 可达树与覆盖树算法

###### 3.5.5.1.1 例：$\sum$ 如图所示

![image-20221025223903123](petri%E7%BD%91/image-20221025223903123-16667087440023.png)

$M_0=(1,0,0)$ ，$S_1$、$S_2$、$S_3$ 的资源数

![image-20221025224019183](petri%E7%BD%91/image-20221025224019183-16667088198764.png)

若无无穷分支，可达树节点即为 $[M_0&gt;$ 

覆盖树算法：为无穷分支“剪枝”

- $M_1\leq M_2$ ，如果 $\forall s \in S:M_1(s)\leq M_2(s)$，$M_2$ 覆盖 $M_1$
- $M_1 &lt; M_2$ ，如果 $M_1 \leq M_2 \wedge \exists s \in S:M_1(s)&lt;M_2(s)$

![image-20221025224920703](petri%E7%BD%91/image-20221025224920703-16667093619455.png)

最后得到的覆盖树

![image-20221025225019867](petri%E7%BD%91/image-20221025225019867-16667094214026.png)

 $[M_0&gt;$ 中所有标识均被覆盖树节点覆盖

![image-20221025225305362](petri%E7%BD%91/image-20221025225305362-16667095860727.png)

覆盖图：$M_2$ 与 $M_1$ 重叠，一类叶节点。将覆盖树同一路径上相同节点重叠

![image-20221025225716505](petri%E7%BD%91/image-20221025225716505-16667098373838.png)

可达树，覆盖树，覆盖图，可用以检查验证活性，有界性，公平性及不变量。

- 如例子中的系统是不公平的，不活的，无界的，没有不变量。

##### 3.5.5.2 求解不变量法

##### 3.5.5.3 化简法：忽略网结构细节

##### 3.5.5.4 提高层次法：提高抽象度以减少节点数

### 3.6 网系统层次

提高抽象度：

![image-20221026104111237](petri%E7%BD%91/image-20221026104111237-16667520722401.png)

实际上 现在已经 学了的 EN 系统 P/T 系统中的两个 变迁 $t_1$ 和 $t_2$ 的关系，不只是事件之间的关系，而是两个事件发生权之间的关系。

提高抽象度（应用依赖）的方法（与应用有关）：

- 先用 EN 系统或 P/T 系统描述，再转为高层次系统
- 或 直接使用高层次系统
- 或 两者混用于同一个问题

 #### 3.6.1 例子，教堂婚礼

EN 系统，描述个体

![image-20221026110644504](petri%E7%BD%91/image-20221026110644504-16667536056092.png)

P/T 系统，同类资源（无个性）

![image-20221026110841599](../../image-20221026110841599.png)

通过 **谓词** 分类后：

![image-20221026110841599](petri%E7%BD%91/image-20221026110841599-16667540933514-16667540941805.png)

### 3.7 高级网系统

#### 3.7.1 谓词/变迁（Pr/T系统）

把相同的谓词合在一起就是 谓词/变迁 系统，例如上面的教堂婚礼的例子：

![QQ截图20221024174451](petri%E7%BD%91/QQ%E6%88%AA%E5%9B%BE20221024174451-16667544575927-16667544588148.png)

- 就绪，等待，休息：一元动态谓词
- 合作：二元动态谓词
- $&lt;x&gt; \neq &lt;w&gt;$ ：一元静态谓词

n 元符号和，相减：

- $&lt;a&gt;+&lt;b&gt;+&lt;w&gt;$，一元
- $&lt;a,w&gt;$，$&lt;b,w&gt;$，二元
- $&lt;a&gt;+&lt;b&gt;$，一元
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://wfuing.github.io/2022/11/19/petri%E7%BD%91/" data-id="clanhikhz00010gv8b6ti8gpo" data-title="petri网 — 袁崇义 教程学习笔记" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/petri/" rel="tag">petri</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2022/11/19/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/petri/" rel="tag">petri</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/petri/" style="font-size: 10px;">petri</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/19/petri%E7%BD%91/">petri网 — 袁崇义 教程学习笔记</a>
          </li>
        
          <li>
            <a href="/2022/11/19/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 九月九<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>